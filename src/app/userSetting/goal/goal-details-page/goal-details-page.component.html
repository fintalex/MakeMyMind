<div class="title-header my-card">
    <div class="title-page-container" translate>
        Детали Цели
    </div>
</div>

<div class="goal-container">
    <mat-card class="goal-form">
        
        <div class="title-page-container" translate>
            Создание/обновление цели 
        </div>

        <!-- name -->
        <div class="ui-g ui-fluid">     

            <div class="ui-md-3 ui-sm-2 margin-vertical-auto text-allign-right">
                Название:
            </div>
            <div class="ui-md-8 ui-sm-9">
                <input type="text" pInputText required placeholder="Укажите кол-во дней" [(ngModel)]="curName" >  
            </div>
        </div>

        <!-- <span *ngIf="warningMessage" class="warn-span">{{'warningMessage' | translate}}</span> -->            

        <div class="ui-g ui-fluid">
            <div class="ui-md-3 ui-sm-2 margin-vertical-auto text-allign-right">
                Дата старта:
            </div>  
            <div class="ui-md-8 ui-sm-9">
                <p-calendar
                    [(ngModel)]="dateStart" 
                    placeholder="Введите дату старта"
                    dateFormat="dd.mm.yy"
                    [minDate]="minDateValue"
                    [locale]="ru"
                    [showIcon]="true"></p-calendar>
            </div>
        </div>
        
        <div class="ui-g ui-fluid">
            <div class="ui-md-3 ui-sm-2 margin-vertical-auto text-allign-right">
                Дата завершения:
            </div>  
            <div class="ui-md-8 ui-sm-9">
                <p-calendar 
                    [(ngModel)]="dateEnd"
                    placeholder="Введите дату завершения"                
                    dateFormat="dd.mm.yy"
                    [minDate]="minDateValue"
                    [locale]="ru"
                    [showIcon]="true"></p-calendar>
            </div>
        </div>         
        
        <div class="conditions form-field ui-md-12">
            
            <p-button label="Добавить условие" (click)="addNewCondition()"></p-button>

            <div class="ui-g ui-fluid" *ngFor="let condition of conditionals">
                <div class="ui-md-3 margin-vertical-auto text-allign-right">
                    Действие:
                </div>
                <div class="ui-md-3">
                    <p-dropdown 
                        class="conditionDDL"
                        [style]="{'width':'100%'}"
                        [options]="existedBrickTypes" 
                        [(ngModel)]="condition.brickType" >
                        <ng-template let-item pTemplate="selectedItem"> 
                            <div class="color-list-option">
                                <span class="text-shadow brick-in-option" 
                                    [ngClass]="{'brick-in-calendar': !item.value.type || item.value.type == 1, 'brick-in-calendar-arrow': item.value.type == 2}"
                                    [ngStyle]="{'background-color': item.value.category.color}">
                                    <mat-icon *ngIf="item.value.isIcon "  
                                                class="brickIcon">
                                        {{item.value.sign}} 
                                    </mat-icon>
                                    <div *ngIf="!item.value.isIcon">{{item.value.sign}}</div> 
                                </span>
                                <div class="mat-option" style="position: relative;height: 25px;">{{ item.value.name }}</div>
                            </div>
                        </ng-template> 

                        <ng-template let-brityp pTemplate="item">                            
                            <div class="color-list-option">
                                <span class="text-shadow brick-in-option" 
                                    [ngClass]="{'brick-in-calendar': !brityp.value.type || brityp.value.type == 1, 'brick-in-calendar-arrow': brityp.value.type == 2}"
                                    [ngStyle]="{'background-color': brityp.value.category.color}">
                                    <mat-icon *ngIf="brityp.value.isIcon "  
                                                class="brickIcon">
                                        {{brityp.value.sign}} 
                                    </mat-icon>
                                    <div *ngIf="!brityp.value.isIcon">{{brityp.value.sign}}</div> 
                                </span>
                                <div class="mat-option" style="position: relative;height: 25px;">{{ brityp.value.name }}</div>
                            </div>
                        </ng-template>
                    </p-dropdown>
                </div>  
                <div class="ui-md-1 margin-vertical-auto text-allign-right">
                    Дни:
                </div>
                <div class="ui-md-1">
                    <input type="text" pInputText placeholder="Укажите кол-во дней" [(ngModel)]="condition.days" >       
                </div>
            </div>

        </div>






        <div class="button-footer">
            <button color="primary" 
                (click)="createNewGoal()"
                mat-raised-button 
                translate>
                    Создать 
            </button>

            <button color="primary" 
                class="float-right"
                (click)="goBack()"
                mat-raised-button 
                translate>
                    Вернуться 
            </button>
        </div>

    </mat-card>
</div>